<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Surah Audio Player (1–114)</title>
  <link rel="icon" href="images/quran.png" type="image/png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Amiri:wght@700&display=swap" rel="stylesheet">
  <style>
    /* --- Simplified Color Palette --- */
    :root {
      --primary-accent: #28a745; /* Green */
      --bg-dark: #1f2937;         /* Dark Gray-Blue */
      --card-bg: #374151;         /* Lighter Gray-Blue */
      --card-border: #4b5563;
      --text-primary: #f9fafb;
      --text-secondary: #d1d5db;
    }
    body {
        font-family: 'Poppins', sans-serif;
        color: var(--text-primary);
        background-color: var(--bg-dark);
    }
    .font-amiri { font-family: 'Amiri', serif; }
    
    @keyframes floatIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .surah-box {
      opacity: 0;
      animation: floatIn 0.5s ease-out forwards;
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      background-color: var(--card-bg);
      border: 1px solid var(--card-border);
    }

    .surah-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.2);
    }

    /* Simple border highlight for the playing surah */
    .surah-box.is-playing {
      border-color: var(--primary-accent);
      box-shadow: 0 0 15px rgba(40, 167, 69, 0.2);
    }

    .close-btn {
      position: fixed; top: 1.25rem; right: 1.5rem; width: 44px; height: 44px;
      background: var(--card-bg);
      border: 1px solid var(--card-border); color: var(--text-secondary);
      display: flex; justify-content: center; align-items: center; border-radius: 50%;
      text-decoration: none; font-size: 1.2rem;
      transition: all 0.3s ease;
      z-index: 1001;
    }
    .close-btn:hover {
      background: var(--primary-accent); color: white; transform: scale(1.1) rotate(90deg);
    }

    /* --- Simplified Audio Player UI --- */
    .play-pause-btn {
      background-color: var(--primary-accent);
      color: white;
      transition: transform 0.2s ease;
    }
    .play-pause-btn:hover { transform: scale(1.08); }
    .play-pause-btn .fa-play { margin-left: 3px; }

    .progress-bar-container { background-color: rgba(255, 255, 255, 0.1); }
    .progress-bar { background-color: var(--primary-accent); }
    .time-display, .volume-container, .repeat-btn { color: var(--text-secondary); }
    
    .volume-slider { -webkit-appearance: none; appearance: none; background: rgba(255, 255, 255, 0.1); }
    .volume-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 14px; height: 14px; background: white; border-radius: 50%; cursor: pointer; }
    .volume-slider::-moz-range-thumb { width: 14px; height: 14px; background: white; border-radius: 50%; cursor: pointer; border: none; }
    
    .repeat-btn { transition: color 0.2s, background-color 0.2s; }
    .repeat-btn:hover { background-color: rgba(255, 255, 255, 0.1); color: white; }
    .repeat-btn.is-active { color: var(--primary-accent); }
    
    .loader {
        border: 2px solid rgba(255,255,255,0.3); border-top-color: #fff;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body class="antialiased">
  
  <!-- MODIFIED: This link now points to Quran.html -->
  <a href="quran.html" class="close-btn" title="Exit to Dashboard"><i class="fas fa-times"></i></a>
  
  <header class="sticky top-0 z-50 py-5">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 bg-gray-900/50 backdrop-blur-lg rounded-2xl py-5 border border-gray-700">
      <h1 class="text-3xl sm:text-4xl font-bold tracking-tight text-center text-white">
        Surah Audio Library
      </h1>
      <p class="text-center text-gray-400 mt-1">Listen to the 114 chapters of the Holy Quran</p>
      <div class="mt-6 max-w-2xl mx-auto relative">
        <input type="text" id="searchInput" placeholder="Search by Surah name or number..."
          class="w-full pl-12 pr-4 py-3 rounded-full border border-gray-600 bg-gray-700 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300 placeholder-gray-400"/>
        <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"></i>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div id="surahGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
      <!-- Surah cards dynamically inserted here -->
    </div>
    <div id="noResultsMessage" class="hidden text-center py-20">
      <i class="fas fa-search-minus mx-auto text-5xl text-gray-500"></i>
      <h3 class="mt-4 text-2xl font-semibold text-white">No Surahs Found</h3>
      <p class="mt-2 text-lg text-gray-400">Your search did not match any Surahs. Please try a different term.</p>
    </div>
  </main>

  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const surahData = [
        { "id": 1, "name": "Al-Fatiha", "nameArabic": "ٱلْفَاتِحَة", "nameEnglish": "The Opener", "revelationType": "Meccan", "numberOfAyahs": 7, "audioSrc": "udio/Q001 - Al Fattiha.mp3" },
        { "id": 2, "name": "Al-Baqarah", "nameArabic": "ٱلْبَقَرَة", "nameEnglish": "The Cow", "revelationType": "Medinan", "numberOfAyahs": 286, "audioSrc": "udio/Q002_1 - Al Baqarah (1).mp3" },
        { "id": 3, "name": "Aal-E-Imran", "nameArabic": "آلِ عِمْرَان", "nameEnglish": "Family of Imran", "revelationType": "Medinan", "numberOfAyahs": 200, "audioSrc": "udio/Q003 - Aal-Imran (2).mp3" },
        { "id": 4, "name": "An-Nisa", "nameArabic": "ٱلنِّسَاء", "nameEnglish": "The Women", "revelationType": "Medinan", "numberOfAyahs": 176, "audioSrc": "udio/Q004 - An-Nisa'.mp3" },
        { "id": 5, "name": "Al-Ma'idah", "nameArabic": "ٱلْمَائِدَة", "nameEnglish": "The Table Spread", "revelationType": "Medinan", "numberOfAyahs": 120, "audioSrc": "udio/Q005 - Al Ma'eda.mp3" },
        { "id": 6, "name": "Al-An'am", "nameArabic": "ٱلْأَنْعَام", "nameEnglish": "The Cattle", "revelationType": "Meccan", "numberOfAyahs": 165, "audioSrc": "udio/Q006_Al_Anam (1).mp3" },
        { "id": 7, "name": "Al-A'raf", "nameArabic": "ٱلْأَعْرَاف", "nameEnglish": "The Heights", "revelationType": "Meccan", "numberOfAyahs": 206, "audioSrc": "udio/Q007 - Al A'raf (1).mp3" },
        { "id": 8, "name": "Al-Anfal", "nameArabic": "ٱلْأَنْفَال", "nameEnglish": "The Spoils of War", "revelationType": "Medinan", "numberOfAyahs": 75, "audioSrc": "udio/Q008 - Al Anfal (1).mp3" },
        { "id": 9, "name": "At-Tawbah", "nameArabic": "ٱلتَّوْبَة", "nameEnglish": "The Repentance", "revelationType": "Medinan", "numberOfAyahs": 129, "audioSrc": "udio/Q009 - At-Touba.mp3" },
        { "id": 10, "name": "Yunus", "nameArabic": "يُونُس", "nameEnglish": "Jonah", "revelationType": "Meccan", "numberOfAyahs": 109, "audioSrc": "udio/Q010 - Yunus.mp3" },
        { "id": 11, "name": "Hud", "nameArabic": "هُود", "nameEnglish": "Hud", "revelationType": "Meccan", "numberOfAyahs": 123, "audioSrc": "udio/Q011 - Hud.mp3" },
        { "id": 12, "name": "Yusuf", "nameArabic": "يُوسُف", "nameEnglish": "Joseph", "revelationType": "Meccan", "numberOfAyahs": 111, "audioSrc": "udio/Q012 - Yusuf.mp3" },
        { "id": 13, "name": "Ar-Ra'd", "nameArabic": "ٱلرَّعْد", "nameEnglish": "The Thunder", "revelationType": "Medinan", "numberOfAyahs": 43, "audioSrc": "udio/Q013 - Ar-Ra'ad.mp3" },
        { "id": 14, "name": "Ibrahim", "nameArabic": "إِبْرَاهِيم", "nameEnglish": "Abraham", "revelationType": "Meccan", "numberOfAyahs": 52, "audioSrc": "udio/14.mp3" },
        { "id": 15, "name": "Al-Hijr", "nameArabic": "ٱلْحِجْر", "nameEnglish": "The Rocky Tract", "revelationType": "Meccan", "numberOfAyahs": 99, "audioSrc": "udio/Q015 - Al-Hijr (1).mp3" },
        { "id": 16, "name": "An-Nahl", "nameArabic": "ٱلنَّحْل", "nameEnglish": "The Bee", "revelationType": "Meccan", "numberOfAyahs": 128, "audioSrc": "udio/Q016 - An-Nahl.mp3" },
        { "id": 17, "name": "Al-Isra", "nameArabic": "ٱلْإِسْرَاء", "nameEnglish": "The Night Journey", "revelationType": "Meccan", "numberOfAyahs": 111, "audioSrc": "udio/Q017 - Al-Isra' (1).mp3" },
        { "id": 18, "name": "Al-Kahf", "nameArabic": "ٱلْكَهْف", "nameEnglish": "The Cave", "revelationType": "Meccan", "numberOfAyahs": 110, "audioSrc": "udio/Q018 - Al Kahf (1).mp3" },
        { "id": 19, "name": "Maryam", "nameArabic": "مَرْيَم", "nameEnglish": "Mary", "revelationType": "Meccan", "numberOfAyahs": 98, "audioSrc": "udio/Q019 - Maryam.mp3" },
        { "id": 20, "name": "Taha", "nameArabic": "طه", "nameEnglish": "Ta-Ha", "revelationType": "Meccan", "numberOfAyahs": 135, "audioSrc": "udio/Q020_Taha.mp3" },
        { "id": 21, "name": "Al-Anbya", "nameArabic": "ٱلْأَنْبِيَاء", "nameEnglish": "The Prophets", "revelationType": "Meccan", "numberOfAyahs": 112, "audioSrc": "udio/Anbiya.mp3" },
        { "id": 22, "name": "Al-Hajj", "nameArabic": "ٱلْحَجّ", "nameEnglish": "The Pilgrimage", "revelationType": "Medinan", "numberOfAyahs": 78, "audioSrc": "udio/Q022_Al_Hajj (1).mp3" },
        { "id": 23, "name": "Al-Mu'minun", "nameArabic": "ٱلْمُؤْمِنُون", "nameEnglish": "The Believers", "revelationType": "Meccan", "numberOfAyahs": 118, "audioSrc": "udio/Q023_Al_Muminoom.mp3" },
        { "id": 24, "name": "An-Nur", "nameArabic": "ٱلنُّور", "nameEnglish": "The Light", "revelationType": "Medinan", "numberOfAyahs": 64, "audioSrc": "udio/Q024_An_Nur.mp3" },
        { "id": 25, "name": "Al-Furqan", "nameArabic": "ٱلْفُرْقَان", "nameEnglish": "The Criterion", "revelationType": "Meccan", "numberOfAyahs": 77, "audioSrc": "udio/Surah 25 Al Furqan Malayalam translation - Islam Malayalam.mp3" },
        { "id": 26, "name": "Ash-Shu'ara", "nameArabic": "ٱلشُّعَرَاء", "nameEnglish": "The Poets", "revelationType": "Meccan", "numberOfAyahs": 227, "audioSrc": "udio/Q026_Ash_Shuara.mp3" },
        { "id": 27, "name": "An-Naml", "nameArabic": "ٱلنَّمْل", "nameEnglish": "The Ant", "revelationType": "Meccan", "numberOfAyahs": 93, "audioSrc": "udio/27.mp3" },
        { "id": 28, "name": "Al-Qasas", "nameArabic": "ٱلْقَصَص", "nameEnglish": "The Stories", "revelationType": "Meccan", "numberOfAyahs": 88, "audioSrc": "udio/Q028_Al_Qasas.mp3" },
        { "id": 29, "name": "Al-Ankabut", "nameArabic": "ٱلْعَنْكَبُوت", "nameEnglish": "The Spider", "revelationType": "Meccan", "numberOfAyahs": 69, "audioSrc": "udio/Q029_Al_Ankaboot (1).mp3" },
        { "id": 30, "name": "Ar-Rum", "nameArabic": "ٱلرُّوم", "nameEnglish": "The Romans", "revelationType": "Meccan", "numberOfAyahs": 60, "audioSrc": "udio/Q030_Ar_Rum.mp3" },
        { "id": 31, "name": "Luqman", "nameArabic": "لُقْمَان", "nameEnglish": "Luqman", "revelationType": "Meccan", "numberOfAyahs": 34, "audioSrc": "udio/Q031 - Luqman.mp3" },
        { "id": 32, "name": "As-Sajdah", "nameArabic": "ٱلسَّجْدَة", "nameEnglish": "The Prostration", "revelationType": "Meccan", "numberOfAyahs": 30, "audioSrc": "udio/Q032 - As-Sajada.mp3" },
        { "id": 33, "name": "Al-Ahzab", "nameArabic": "ٱلْأَحْزَاب", "nameEnglish": "The Combined Forces", "revelationType": "Medinan", "numberOfAyahs": 73, "audioSrc": "udio/Q033 - Al-Ahzab.mp3" },
        { "id": 34, "name": "Saba", "nameArabic": "سَبَأ", "nameEnglish": "Sheba", "revelationType": "Meccan", "numberOfAyahs": 54, "audioSrc": "udio/Q034 - Saba'.mp3" },
        { "id": 35, "name": "Fatir", "nameArabic": "فَاطِر", "nameEnglish": "Originator", "revelationType": "Meccan", "numberOfAyahs": 45, "audioSrc": "udio/Q035 - Fatir.mp3" },
        { "id": 36, "name": "Ya-Sin", "nameArabic": "يسٓ", "nameEnglish": "Ya Sin", "revelationType": "Meccan", "numberOfAyahs": 83, "audioSrc": "udio/Q036 - Yasin (1).mp3" },
        { "id": 37, "name": "As-Saffat", "nameArabic": "ٱلصَّافَّات", "nameEnglish": "Those who rank themselves", "revelationType": "Meccan", "numberOfAyahs": 182, "audioSrc": "udio/Q037 - As-Saffat.mp3" },
        { "id": 38, "name": "Sad", "nameArabic": "صٓ", "nameEnglish": "The Letter 'Saad'", "revelationType": "Meccan", "numberOfAyahs": 88, "audioSrc": "udio/Q038 - Sad.mp3" },
        { "id": 39, "name": "Az-Zumar", "nameArabic": "ٱلزُّمَر", "nameEnglish": "The Troops", "revelationType": "Meccan", "numberOfAyahs": 75, "audioSrc": "udio/Q039 - Az-Zumar.mp3" },
        { "id": 40, "name": "Ghafir", "nameArabic": "غَافِر", "nameEnglish": "The Forgiver", "revelationType": "Meccan", "numberOfAyahs": 85, "audioSrc": "udio/Q040 - Ghafir.mp3" },
        { "id": 41, "name": "Fussilat", "nameArabic": "فُصِّلَت", "nameEnglish": "Explained in Detail", "revelationType": "Meccan", "numberOfAyahs": 54, "audioSrc": "udio/Q041 - Fussilat.mp3" },
        { "id": 42, "name": "Ash-Shura", "nameArabic": "ٱلشُّورىٰ", "nameEnglish": "The Consultation", "revelationType": "Meccan", "numberOfAyahs": 53, "audioSrc": "udio/Q042 - Ash-Shura.mp3" },
        { "id": 43, "name": "Az-Zukhruf", "nameArabic": "ٱلزُّخْرُف", "nameEnglish": "The Ornaments of Gold", "revelationType": "Meccan", "numberOfAyahs": 89, "audioSrc": "udio/Q043 Az-Zukuruf.mp3" },
        { "id": 44, "name": "Ad-Dukhan", "nameArabic": "ٱلدُّخَان", "nameEnglish": "The Smoke", "revelationType": "Meccan", "numberOfAyahs": 59, "audioSrc": "udio/Q044- Adh-Dhukhan (1).mp3" },
        { "id": 45, "name": "Al-Jathiyah", "nameArabic": "ٱلْجَاثِيَة", "nameEnglish": "The Crouching", "revelationType": "Meccan", "numberOfAyahs": 37, "audioSrc": "udio/Q045 - Al Jathiya (1).mp3" },
        { "id": 46, "name": "Al-Ahqaf", "nameArabic": "ٱلْأَحْقَاف", "nameEnglish": "The Wind-Curved Sandhills", "revelationType": "Meccan", "numberOfAyahs": 35, "audioSrc": "udio/Q046 - Al Ahqaf (1).mp3" },
        { "id": 47, "name": "Muhammad", "nameArabic": "مُحَمَّد", "nameEnglish": "Muhammad", "revelationType": "Medinan", "numberOfAyahs": 38, "audioSrc": "udio/47.mp3" },
        { "id": 48, "name": "Al-Fath", "nameArabic": "ٱلْفَتْح", "nameEnglish": "The Victory", "revelationType": "Medinan", "numberOfAyahs": 29, "audioSrc": "udio/Q048 - Al Fathah (1).mp3" },
        { "id": 49, "name": "Al-Hujurat", "nameArabic": "ٱلْحُجُرَات", "nameEnglish": "The Rooms", "revelationType": "Medinan", "numberOfAyahs": 18, "audioSrc": "udio/Q049 - Al Hujurat (1).mp3" },
        { "id": 50, "name": "Qaf", "nameArabic": "قٓ", "nameEnglish": "The Letter 'Qaf'", "revelationType": "Meccan", "numberOfAyahs": 45, "audioSrc": "udio/Q050 - Qaf.mp3" },
        { "id": 51, "name": "Adh-Dhariyat", "nameArabic": "ٱلذَّارِيَات", "nameEnglish": "The Winnowing Winds", "revelationType": "Meccan", "numberOfAyahs": 60, "audioSrc": "udio/Q051 - Adh-Dhariyat.mp3" },
        { "id": 52, "name": "At-Tur", "nameArabic": "ٱلطُّور", "nameEnglish": "The Mount", "revelationType": "Meccan", "numberOfAyahs": 49, "audioSrc": "udio/Q052 - At-Tur.mp3" },
        { "id": 53, "name": "An-Najm", "nameArabic": "ٱلنَّجْم", "nameEnglish": "The Star", "revelationType": "Meccan", "numberOfAyahs": 62, "audioSrc": "udio/Q053 - Al Najm.mp3" },
        { "id": 54, "name": "Al-Qamar", "nameArabic": "ٱلْقَمَر", "nameEnglish": "The Moon", "revelationType": "Meccan", "numberOfAyahs": 55, "audioSrc": "udio/Q054 - Al Qamar.mp3" },
        { "id": 55, "name": "Ar-Rahman", "nameArabic": "ٱلرَّحْمَٰن", "nameEnglish": "The Most Merciful", "revelationType": "Medinan", "numberOfAyahs": 78, "audioSrc": "udio/Q055 - Ar-Rahman.mp3" },
        { "id": 56, "name": "Al-Waqi'ah", "nameArabic": "ٱلْوَاقِعَة", "nameEnglish": "The Inevitable", "revelationType": "Meccan", "numberOfAyahs": 96, "audioSrc": "udio/Q056 - Al Waqia'.mp3" },
        { "id": 57, "name": "Al-Hadid", "nameArabic": "ٱلْحَدِيد", "nameEnglish": "The Iron", "revelationType": "Medinan", "numberOfAyahs": 29, "audioSrc": "udio/Q057 - Al Hadeeth.mp3" },
        { "id": 58, "name": "Al-Mujadila", "nameArabic": "ٱلْمُجَادِلَة", "nameEnglish": "The Pleading Woman", "revelationType": "Medinan", "numberOfAyahs": 22, "audioSrc": "udio/Q058 - Al Mujadillah.mp3" },
        { "id": 59, "name": "Al-Hashr", "nameArabic": "ٱلْحَشْر", "nameEnglish": "The Exile", "revelationType": "Medinan", "numberOfAyahs": 24, "audioSrc": "udio/Q059 - Al Hashr (1).mp3" },
        { "id": 60, "name": "Al-Mumtahanah", "nameArabic": "ٱلْمُمْتَحَنَة", "nameEnglish": "She that is to be examined", "revelationType": "Medinan", "numberOfAyahs": 13, "audioSrc": "udio/Q060 - Al-Mumthahana.mp3" },
        { "id": 61, "name": "As-Saff", "nameArabic": "ٱلصَّفّ", "nameEnglish": "The Ranks", "revelationType": "Medinan", "numberOfAyahs": 14, "audioSrc": "udio/Q061 - As-Saff.mp3" },
        { "id": 62, "name": "Al-Jumu'ah", "nameArabic": "ٱلْجُمُعَة", "nameEnglish": "The Congregation", "revelationType": "Medinan", "numberOfAyahs": 11, "audioSrc": "udio/Q062 - Al Juma' (1).mp3" },
        { "id": 63, "name": "Al-Munafiqun", "nameArabic": "ٱلْمُنَافِقُون", "nameEnglish": "The Hypocrites", "revelationType": "Medinan", "numberOfAyahs": 11, "audioSrc": "udio/Q063 - Al Munafiqoon.mp3" },
        { "id": 64, "name": "At-Taghabun", "nameArabic": "ٱلتَّغَابُن", "nameEnglish": "The Mutual Disillusion", "revelationType": "Medinan", "numberOfAyahs": 18, "audioSrc": "udio/Q064 - At-Tagabun.mp3" },
        { "id": 65, "name": "At-Talaq", "nameArabic": "ٱلطَّلَاق", "nameEnglish": "The Divorce", "revelationType": "Medinan", "numberOfAyahs": 12, "audioSrc": "udio/Q065 - At-Talaq.mp3" },
        { "id": 66, "name": "At-Tahrim", "nameArabic": "ٱلتَّحْرِيم", "nameEnglish": "The Prohibition", "revelationType": "Medinan", "numberOfAyahs": 12, "audioSrc": "udio/Q066 - At-Tahrim.mp3" },
        { "id": 67, "name": "Al-Mulk", "nameArabic": "ٱلْمُلْك", "nameEnglish": "The Sovereignty", "revelationType": "Meccan", "numberOfAyahs": 30, "audioSrc": "udio/Q067 - Al Mulk.mp3" },
        { "id": 68, "name": "Al-Qalam", "nameArabic": "ٱلْقَلَم", "nameEnglish": "The Pen", "revelationType": "Meccan", "numberOfAyahs": 52, "audioSrc": "udio/Q068 - Al Qalam.mp3" },
        { "id": 69, "name": "Al-Haqqah", "nameArabic": "ٱلْحَاقَّة", "nameEnglish": "The Reality", "revelationType": "Meccan", "numberOfAyahs": 52, "audioSrc": "udio/Q069 - Al Haqa (1).mp3" },
        { "id": 70, "name": "Al-Ma'arij", "nameArabic": "ٱلْمَعَارِج", "nameEnglish": "The Ascending Stairways", "revelationType": "Meccan", "numberOfAyahs": 44, "audioSrc": "udio/Q070 - Al Ma'arij (1).mp3" },
        { "id": 71, "name": "Nuh", "nameArabic": "نُوح", "nameEnglish": "Noah", "revelationType": "Meccan", "numberOfAyahs": 28, "audioSrc": "udio/Q071 - Nooh.mp3" },
        { "id": 72, "name": "Al-Jinn", "nameArabic": "ٱلْجِنّ", "nameEnglish": "The Jinn", "revelationType": "Meccan", "numberOfAyahs": 28, "audioSrc": "udio/Q072 - Al Jinn (1).mp3" },
        { "id": 73, "name": "Al-Muzzammil", "nameArabic": "ٱلْمُزَّمِّل", "nameEnglish": "The Enshrouded One", "revelationType": "Meccan", "numberOfAyahs": 20, "audioSrc": "udio/Q073 - Al Muzzammil.mp3" },
        { "id": 74, "name": "Al-Muddaththir", "nameArabic": "ٱلْمُدَّثِّر", "nameEnglish": "The Cloaked One", "revelationType": "Meccan", "numberOfAyahs": 56, "audioSrc": "udio/74.mp3" },
        { "id": 75, "name": "Al-Qiyamah", "nameArabic": "ٱلْقِيَامَة", "nameEnglish": "The Resurrection", "revelationType": "Meccan", "numberOfAyahs": 40, "audioSrc": "udio/Q075 - Al Qiyama.mp3" },
        { "id": 76, "name": "Al-Insan", "nameArabic": "ٱلْإِنْسَان", "nameEnglish": "Man", "revelationType": "Medinan", "numberOfAyahs": 31, "audioSrc": "udio/Q076 - Al Insan (1).mp3" },
        { "id": 77, "name": "Al-Mursalat", "nameArabic": "ٱلْمُرْسَلَات", "nameEnglish": "The Emissaries", "revelationType": "Meccan", "numberOfAyahs": 50, "audioSrc": "udio/Q077 - Al Mursalat (1).mp3" },
        { "id": 78, "name": "An-Naba", "nameArabic": "ٱلنَّبَأ", "nameEnglish": "The Tidings", "revelationType": "Meccan", "numberOfAyahs": 40, "audioSrc": "udio/Q078 - An-Naba'.mp3" },
        { "id": 79, "name": "An-Nazi'at", "nameArabic": "ٱلنَّازِعَات", "nameEnglish": "Those Who Drag Forth", "revelationType": "Meccan", "numberOfAyahs": 46, "audioSrc": "udio/Q079 - An-Naasi'at.mp3" },
        { "id": 80, "name": "'Abasa", "nameArabic": "عَبَسَ", "nameEnglish": "He Frowned", "revelationType": "Meccan", "numberOfAyahs": 42, "audioSrc": "udio/Q080 - Abasa (1).mp3" },
        { "id": 81, "name": "At-Takwir", "nameArabic": "ٱلتَّكْوِير", "nameEnglish": "The Overthrowing", "revelationType": "Meccan", "numberOfAyahs": 29, "audioSrc": "udio/Q081 - At-Takweer.mp3" },
        { "id": 82, "name": "Al-Infitar", "nameArabic": "ٱلْاِنْفِطَار", "nameEnglish": "The Cleaving", "revelationType": "Meccan", "numberOfAyahs": 19, "audioSrc": "udio/Q082 - Al Infitar (1).mp3" },
        { "id": 83, "name": "Al-Mutaffifin", "nameArabic": "ٱلْمُطَفِّفِين", "nameEnglish": "The Defrauding", "revelationType": "Meccan", "numberOfAyahs": 36, "audioSrc": "udio/Q083 - Al Muthaffiffeen (1).mp3" },
        { "id": 84, "name": "Al-Inshiqaq", "nameArabic": "ٱلْاِنْشِقَاق", "nameEnglish": "The Sundering", "revelationType": "Meccan", "numberOfAyahs": 25, "audioSrc": "udio/Q084 - Al Inshiqaq (1).mp3" },
        { "id": 85, "name": "Al-Buruj", "nameArabic": "ٱلْبُرُوج", "nameEnglish": "The Mansions of the Stars", "revelationType": "Meccan", "numberOfAyahs": 22, "audioSrc": "udio/Q085 - Al Burooj (2).mp3" },
        { "id": 86, "name": "At-Tariq", "nameArabic": "ٱلطَّارِق", "nameEnglish": "The Nightcommer", "revelationType": "Meccan", "numberOfAyahs": 17, "audioSrc": "udio/Q086 At-Tariq.mp3" },
        { "id": 87, "name": "Al-A'la", "nameArabic": "ٱلْأَعْلَىٰ", "nameEnglish": "The Most High", "revelationType": "Meccan", "numberOfAyahs": 19, "audioSrc": "udio/Q087 - Al A'la (1).mp3" },
        { "id": 88, "name": "Al-Ghashiyah", "nameArabic": "ٱلْغَاشِيَة", "nameEnglish": "The Overwhelming", "revelationType": "Meccan", "numberOfAyahs": 26, "audioSrc": "udio/Q088 - Al Ghashiya (1).mp3" },
        { "id": 89, "name": "Al-Fajr", "nameArabic": "ٱلْفَجْر", "nameEnglish": "The Dawn", "revelationType": "Meccan", "numberOfAyahs": 30, "audioSrc": "udio/Q089 - Al Fajr (1).mp3" },
        { "id": 90, "name": "Al-Balad", "nameArabic": "ٱلْبَلَد", "nameEnglish": "The City", "revelationType": "Meccan", "numberOfAyahs": 20, "audioSrc": "udio/Q090 - Al Balad (1).mp3" },
        { "id": 91, "name": "Ash-Shams", "nameArabic": "ٱلشَّمْس", "nameEnglish": "The Sun", "revelationType": "Meccan", "numberOfAyahs": 15, "audioSrc": "udio/Q091 - Ash-Shams.mp3" },
        { "id": 92, "name": "Al-Layl", "nameArabic": "ٱللَّيْل", "nameEnglish": "The Night", "revelationType": "Meccan", "numberOfAyahs": 21, "audioSrc": "udio/Q092 - Al-Lail (1).mp3" },
        { "id": 93, "name": "Ad-Duha", "nameArabic": "ٱلضُّحَىٰ", "nameEnglish": "The Morning Hours", "revelationType": "Meccan", "numberOfAyahs": 11, "audioSrc": "udio/93.mp3" },
        { "id": 94, "name": "Ash-Sharh", "nameArabic": "ٱلشَّرْح", "nameEnglish": "The Relief", "revelationType": "Meccan", "numberOfAyahs": 8, "audioSrc": "udio/Q094 - Ash-Sharh.mp3" },
        { "id": 95, "name": "At-Tin", "nameArabic": "ٱلتِّين", "nameEnglish": "The Fig", "revelationType": "Meccan", "numberOfAyahs": 8, "audioSrc": "udio/Q095 - At-Tin.mp3" },
        { "id": 96, "name": "Al-'Alaq", "nameArabic": "ٱلْعَلَق", "nameEnglish": "The Clot", "revelationType": "Meccan", "numberOfAyahs": 19, "audioSrc": "udio/Q096 - Al Alaq (1).mp3" },
        { "id": 97, "name": "Al-Qadr", "nameArabic": "ٱلْقَدْر", "nameEnglish": "The Power", "revelationType": "Meccan", "numberOfAyahs": 5, "audioSrc": "udio/Q097 - Al Qadr.mp3" },
        { "id": 98, "name": "Al-Bayyinah", "nameArabic": "ٱلْبَيِّنَة", "nameEnglish": "The Clear Proof", "revelationType": "Medinan", "numberOfAyahs": 8, "audioSrc": "udio/Q098 - Al Bayyinah (1).mp3" },
        { "id": 99, "name": "Az-Zalzalah", "nameArabic": "ٱلزَّلْzَلَة", "nameEnglish": "The Earthquake", "revelationType": "Medinan", "numberOfAyahs": 8, "audioSrc": "udio/Q099 - Al Zalzalah.mp3" },
        { "id": 100, "name": "Al-'Adiyat", "nameArabic": "ٱلْعَادِيَات", "nameEnglish": "The Courser", "revelationType": "Meccan", "numberOfAyahs": 11, "audioSrc": "udio/Q100 Al- Adhiyat (1).mp3" },
        { "id": 101, "name": "Al-Qari'ah", "nameArabic": "ٱلْقَارِعَة", "nameEnglish": "The Calamity", "revelationType": "Meccan", "numberOfAyahs": 11, "audioSrc": "udio/Q101 - Al Qaria'.mp3" },
        { "id": 102, "name": "At-Takathur", "nameArabic": "ٱلتَّكَاثُر", "nameEnglish": "The Rivalry in World Increase", "revelationType": "Meccan", "numberOfAyahs": 8, "audioSrc": "udio/Q102 - At-Takazur.mp3" },
        { "id": 103, "name": "Al-'Asr", "nameArabic": "ٱلْعَصْر", "nameEnglish": "The Declining Day", "revelationType": "Meccan", "numberOfAyahs": 3, "audioSrc": "udio/Q103 - Al-Asr (1).mp3" },
        { "id": 104, "name": "Al-Humazah", "nameArabic": "ٱلْهُمَزَة", "nameEnglish": "The Traducer", "revelationType": "Meccan", "numberOfAyahs": 9, "audioSrc": "udio/Al Humaza.mp3" },
        { "id": 105, "name": "Al-Fil", "nameArabic": "ٱلْفِيل", "nameEnglish": "The Elephant", "revelationType": "Meccan", "numberOfAyahs": 5, "audioSrc": "udio/fill.mp3" },
        { "id": 106, "name": "Quraysh", "nameArabic": "قُرَيْش", "nameEnglish": "Quraysh", "revelationType": "Meccan", "numberOfAyahs": 4, "audioSrc": "udio/Q106 - Quraish.mp3" },
        { "id": 107, "name": "Al-Ma'un", "nameArabic": "ٱلْمَاعُون", "nameEnglish": "The Small Kindnesses", "revelationType": "Meccan", "numberOfAyahs": 7, "audioSrc": "udio/107.mp3" },
        { "id": 108, "name": "Al-Kawthar", "nameArabic": "ٱلْكَوْثَر", "nameEnglish": "The Abundance", "revelationType": "Meccan", "numberOfAyahs": 3, "audioSrc": "udio/Al Kouthar.mp3" },
        { "id": 109, "name": "Al-Kafirun", "nameArabic": "ٱلْكَافِرُون", "nameEnglish": "The Disbelievers", "revelationType": "Meccan", "numberOfAyahs": 6, "audioSrc": "udio/Al Kafiroon.mp3" },
        { "id": 110, "name": "An-Nasr", "nameArabic": "ٱلنَّصْر", "nameEnglish": "The Divine Support", "revelationType": "Medinan", "numberOfAyahs": 3, "audioSrc": "udio/110.mp3" },
        { "id": 111, "name": "Al-Masad", "nameArabic": "ٱلْمَسَد", "nameEnglish": "The Palm Fiber", "revelationType": "Meccan", "numberOfAyahs": 5, "audioSrc": "udio/Al Masad.mp3" },
        { "id": 112, "name": "Al-Ikhlas", "nameArabic": "ٱلْإِخْلَاص", "nameEnglish": "The Sincerity", "revelationType": "Meccan", "numberOfAyahs": 4, "audioSrc": "udio/Q112 - Al Ikhlas (3).mp3" },
        { "id": 113, "name": "Al-Falaq", "nameArabic": "ٱلْفَلَق", "nameEnglish": "The Daybreak", "revelationType": "Meccan", "numberOfAyahs": 5, "audioSrc": "udio/Q113 - Al-Falaq (2).mp3" },
        { "id": 114, "name": "An-Nas", "nameArabic": "ٱلنَّاس", "nameEnglish": "Mankind", "revelationType": "Meccan", "numberOfAyahs": 6, "audioSrc": "udio/Q114 - Nass.mp3" }
      ];

      const surahGrid = document.getElementById('surahGrid');
      const searchInput = document.getElementById('searchInput');
      const noResultsMessage = document.getElementById('noResultsMessage');
      let currentPlayingAudio = null;

      const formatTime = (seconds) => {
        if (isNaN(seconds)) return '00:00';
        const minutes = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      };

      const renderSurahs = (surahsToRender) => {
        surahGrid.innerHTML = '';
        noResultsMessage.classList.toggle('hidden', surahsToRender.length > 0);

        surahsToRender.forEach((surah, index) => {
          const surahBox = document.createElement('div');
          surahBox.className = 'surah-box rounded-2xl p-5 flex flex-col';
          surahBox.style.animationDelay = `${index * 35}ms`;
          surahBox.dataset.surahId = surah.id;

          // HTML structure with simplified classes
          surahBox.innerHTML = `
            <audio class="audio-element hidden" src="${surah.audioSrc}" preload="metadata"></audio>
            
            <div class="flex justify-between items-start mb-4">
              <div class="flex items-center gap-4">
                <span class="flex items-center justify-center w-12 h-12 bg-gray-700 text-white font-bold text-xl rounded-full flex-shrink-0">${surah.id}</span>
                <div>
                  <h2 class="text-xl font-semibold text-text-primary">${surah.name}</h2>
                  <p class="text-sm text-text-secondary">${surah.nameEnglish}</p>
                </div>
              </div>
              <div class="text-right ml-2"><h3 class="font-amiri text-3xl text-gray-400">${surah.nameArabic}</h3></div>
            </div>
            
            <div class="custom-audio-player flex items-center gap-3 w-full mt-auto">
              <button class="play-pause-btn rounded-full w-12 h-12 flex items-center justify-center flex-shrink-0">
                <div class="loader absolute w-5 h-5 hidden"></div>
                <i class="icon fas fa-play text-xl text-white"></i>
              </button>
              <div class="player-controls flex flex-col w-full gap-1.5">
                <div class="progress-bar-container rounded-full h-2 cursor-pointer w-full p-0">
                  <div class="progress-bar h-full rounded-full w-0"></div>
                </div>
                <div class="time-and-volume flex justify-between items-center">
                  <span class="time-display text-xs font-mono">00:00 / 00:00</span>
                  <div class="flex items-center gap-2">
                    <button class="repeat-btn rounded-full w-8 h-8 flex items-center justify-center"><i class="fas fa-repeat text-sm"></i></button>
                    <div class="volume-container flex items-center gap-2">
                      <i class="fas fa-volume-high text-sm"></i>
                      <input type="range" min="0" max="1" step="0.01" value="1" class="volume-slider w-16 h-1 rounded-full outline-none cursor-pointer">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
          surahGrid.appendChild(surahBox);
        });
        attachPlayerEvents();
      };
      
      const attachPlayerEvents = () => {
        document.querySelectorAll('.surah-box').forEach(box => {
          const audio = box.querySelector('.audio-element');
          const playPauseBtn = box.querySelector('.play-pause-btn');
          const playPauseIcon = playPauseBtn.querySelector('.icon');
          const loader = playPauseBtn.querySelector('.loader');
          const progressBar = box.querySelector('.progress-bar');
          const progressBarContainer = box.querySelector('.progress-bar-container');
          const timeDisplay = box.querySelector('.time-display');
          const volumeSlider = box.querySelector('.volume-slider');
          const repeatBtn = box.querySelector('.repeat-btn');

          // Check if audio source is valid before attempting playback
          audio.addEventListener('error', (e) => {
            console.error('Audio error:', e);
            alert(`Failed to load audio for ${box.querySelector('h2').textContent}. Please check if the file exists at "${audio.src}" or try again later.`);
          });

          playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
              if (currentPlayingAudio && currentPlayingAudio !== audio) {
                const oldAudio = currentPlayingAudio;
                oldAudio.pause();
                oldAudio.loop = false;
                oldAudio.closest('.surah-box')?.querySelector('.repeat-btn').classList.remove('is-active');
              }
              audio.play().catch(error => {
                console.error('Audio playback failed:', error);
                let errorMessage = 'Failed to play audio. ';
                if (error.name === 'NotFoundError') {
                  errorMessage += `The file "${audio.src}" could not be found. Please ensure the file exists.`;
                } else if (error.name === 'NotAllowedError') {
                  errorMessage += 'Playback was blocked. Please allow autoplay or interact with the page first.';
                } else {
                  errorMessage += 'Please check your network connection or try again later.';
                }
                alert(errorMessage);
              });
              currentPlayingAudio = audio;
            } else {
              audio.pause();
            }
          });

          audio.onplay = () => {
            playPauseIcon.className = 'icon fas fa-pause text-xl text-white';
            box.classList.add('is-playing');
            document.querySelectorAll('.surah-box').forEach(b => {
              if (b !== box) b.classList.remove('is-playing');
            });
          };
          audio.onpause = () => {
            playPauseIcon.className = 'icon fas fa-play text-xl text-white';
            box.classList.remove('is-playing');
          };
          audio.onwaiting = () => { loader.style.display = 'block'; playPauseIcon.style.display = 'none'; };
          audio.onplaying = () => { loader.style.display = 'none'; playPauseIcon.style.display = 'block'; };
          
          audio.onloadedmetadata = () => timeDisplay.textContent = `00:00 / ${formatTime(audio.duration)}`;
          audio.ontimeupdate = () => {
            if (audio.duration) {
              progressBar.style.width = `${(audio.currentTime / audio.duration) * 100}%`;
              timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
            }
          };

          audio.onended = () => {
            if (!audio.loop) {
              const nextBox = box.nextElementSibling;
              if (nextBox && nextBox.classList.contains('surah-box')) {
                  nextBox.querySelector('.play-pause-btn').click();
              } else {
                  currentPlayingAudio = null;
              }
            }
          };

          progressBarContainer.addEventListener('click', (e) => {
            if (isNaN(audio.duration)) return;
            const rect = progressBarContainer.getBoundingClientRect();
            audio.currentTime = ((e.clientX - rect.left) / progressBarContainer.offsetWidth) * audio.duration;
          });

          volumeSlider.addEventListener('input', (e) => { audio.volume = e.target.value; });

          repeatBtn.addEventListener('click', () => {
            audio.loop = !audio.loop;
            repeatBtn.classList.toggle('is-active', audio.loop);
          });
        });
      };
      
      searchInput.addEventListener('input', function() {
        const searchTerm = this.value.trim().toLowerCase();
        if (currentPlayingAudio) {
            currentPlayingAudio.pause();
            currentPlayingAudio = null;
        }
        const filteredSurahs = surahData.filter(surah => 
          surah.name.toLowerCase().includes(searchTerm) || 
          surah.id.toString().includes(searchTerm) ||
          surah.nameEnglish.toLowerCase().includes(searchTerm)
        );
        renderSurahs(filteredSurahs);
      });

      renderSurahs(surahData);
    });
  </script>
</body>
</html>